<%- include ('../Partials/header') %> <%- include ('../Partials/menu') %>

<main>
    <!--title of the wishlist page will be <username>'s wishlist-->
    <center>
        <h2 class="title"><%= user %>'s Wishlist:</h2>
    </center>
    <center>
        <small id="searchBooksHelp" class="form-text text-muted">Click <a href="/searchBooks">here</a> to add more books to your wishlist!</small>
    </center>
        <!--iteratively display books in users wishlist based on their info in db/info from api call-->
        <!--change to cards for better look?????-->
            <% if (books) { %>
                <% if (books.length == 0) { %>
                    <center>
                        <h5><%= user %>: You have no books in your wishlist.</h5>
                    </center>
                <% } %>
                <% books.forEach(function(item) { %>
                    <% if (item.length == 0) { %>
                        <center>
                            <h5><%= user %>: You have no books in your wishlist.</h5>
                        </center>
                    <% }  else { %>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>Book Title</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                    <% for (let j = 0; j < item.length; j++ ) { %>
                        <% let image = item[j].imageloct; %>
                        <% let isbn = item[j].book_isbn; %>
                    <tr>
                        <td><img src="<%= item[j].imageloct %>" width="200" height="200"></td>
                        <td><%= item[j].name %></td>
                        <td>
                            <form id="remove-form" action="/wishlistRemove/<%= isbn %>" method="post">
                                <button class="btn btn-danger" type="submit">Remove Book</button>
                            </form>
                        </td>
                    </tr>
                    <% } %>
                    <% } %>
                    <% }) %>
                <% } %>
        </tbody>
    </table>
</main>

<%- include ('../Partials/footer') %>